<!DOCTYPE html>
<html lang="es">
<head>
<meta charset="UTF-8" />
<title>Paquetes del Juego</title>
</head>
<body>
<h1>Paquetes para el juego</h1>
<ul id="lista-paquetes"></ul>

<script type="module">
  import { supabase } from './supabase.js';

  // Función para leer parámetros de URL
  function obtenerParametro(nombre) {
    const urlParams = new URLSearchParams(window.location.search);
    return urlParams.get(nombre);
  }

  async function cargarPaquetesParaJuego(juegoId) {
    if (!juegoId) {
      document.getElementById('lista-paquetes').innerHTML = 'No se seleccionó ningún juego.';
      return;
    }

    const { data, error } = await supabase
      .from('paquetes')
      .select('*')
      .eq('juego_id', juegoId);

    if (error) {
      document.getElementById('lista-paquetes').innerHTML = 'Error al cargar paquetes.';
      console.error(error);
      return;
    }

    if (!data.length) {
      document.getElementById('lista-paquetes').innerHTML = 'No se encontraron paquetes para este juego.';
      return;
    }

    const lista = document.getElementById('lista-paquetes');
    lista.innerHTML = '';
    data.forEach(paq => {
      const li = document.createElement('li');
      li.textContent = `${paq.nombre} - ${paq.descripcion || ''} - Precio: $${paq.precio}`;
      lista.appendChild(li);
    });
  }

  const juegoSeleccionado = obtenerParametro('juego_id');
  cargarPaquetesParaJuego(juegoSeleccionado);
</script>

</body>
</html>
